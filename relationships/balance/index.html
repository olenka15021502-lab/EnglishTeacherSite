<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Path to Balance</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  font-family: Georgia, "Times New Roman", serif;
}

.paragraph-card {
  background: white;
  border: 2px solid #e9d5ff;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 10px 20px rgba(0,0,0,.08);
}

.paragraph-card.correct {
  background: linear-gradient(135deg, #d4f1d4, #e8f8e8);
  border-color: #4ade80;
}

.dragging {
  opacity: .5;
}

.mobile-controls button {
  font-size: 1.2rem;
}
</style>
</head>

<body class="min-h-screen bg-gradient-to-br from-purple-200 via-purple-100 to-pink-100">

<div class="max-w-4xl mx-auto p-6">

<h1 class="text-3xl font-bold text-center text-purple-800 mb-4">
The Path to Balance
</h1>

<p class="text-center text-purple-700 mb-6">
Arrange the paragraphs in the correct order.
</p>

<div class="text-center mb-6">
<button id="checkBtn" class="px-6 py-3 bg-purple-800 text-white rounded-lg shadow">
Check My Answer
</button>
<button id="resetBtn" class="px-6 py-3 bg-purple-600 text-white rounded-lg shadow hidden">
Try Again
</button>
<div id="result" class="mt-4 text-xl font-bold hidden"></div>
</div>

<div id="container" class="space-y-4"></div>

</div>

<script>
const isMobile = window.matchMedia('(hover: none)').matches;

const paragraphs = [
{ id:'A', correct:0, text:`Within the first year of their marriage, the dynamics of Anna and Robert's relationship began to change. Influenced by her difficult family background, Anna gradually started to take her husband for granted. She became emotionally distant, and despite Robert's consistent efforts, a sense of coldness crept into their relationship. Although Robert continued to pull his weight in the family and often tried to go the extra mile, Anna grew increasingly absorbed in her career. Early in their marriage, she had promised to think about starting a family, but as time passed, she quietly went back on her promise. This growing imbalance slowly drove a wedge between them.`},
{ id:'B', correct:1, text:`Robert found himself on the end of his tether. Feeling that his efforts were no longer noticed or appreciated, he began to bottle up his feelings, hoping the situation would somehow resolve itself. Instead, the emotional distance only deepened. At the same time, Robert was in turmoil, feeling misunderstood and emotionally drained. Realising that the situation was no longer sustainable, he suggested they take time apart.`},
{ id:'C', correct:2, text:`Anna reacted strongly. She seethed with resentment, convinced that Robert was being unfair and failing to see how much she had been working for their future ‚Äî for financial security, a home, and stability. From her perspective, his decision felt sudden and deeply hurtful.`},
{ id:'D', correct:3, text:`After several weeks of separation, Anna began to reflect on her behaviour. She gradually recognised how emotionally distant she had become and how little she had communicated her fears and doubts. Determined to make things right, she reached out, ready to meet Robert halfway.

When they finally spoke, they managed to clear the air. Anna admitted that her fear of starting a family was rooted in her childhood, shaped by the emotional tensions she had witnessed between her parents and the instability she associated with family life at that time. This conversation marked a turning point.`},
{ id:'E', correct:4, text:`With renewed trust and emotional clarity, Anna and Robert reached a place of mutual understanding and a sense of calm. They felt more grounded, more secure, and at peace with each other. Now, they are expecting a baby ‚Äî not as a result of pressure or fear, but as a shared and conscious decision.`}
];

let order = [];

function shuffle() {
  do {
    order = [...paragraphs].sort(()=>Math.random()-0.5);
  } while(order.some((p,i)=>p.correct===i));
}

function render() {
  const c = document.getElementById('container');
  c.innerHTML = '';

  order.forEach((p, i) => {
    const card = document.createElement('div');
    card.className = 'paragraph-card';
    card.dataset.id = p.id;

    card.innerHTML = `
      <p class="mb-4 leading-relaxed text-gray-800 whitespace-pre-line">${p.text}</p>
      ${isMobile ? `
      <div class="mobile-controls flex gap-3 justify-end">
        <button onclick="moveUp(${i})">‚¨ÜÔ∏è</button>
        <button onclick="moveDown(${i})">‚¨áÔ∏è</button>
      </div>` : ``}
    `;

    if (!isMobile) {
      card.draggable = true;

      card.ondragstart = () => {
        card.classList.add('dragging');
      };
      card.ondragend = () => {
        card.classList.remove('dragging');
        syncOrder();
      };
      card.ondragover = e => {
        e.preventDefault();
        const dragging = document.querySelector('.dragging');
        if (!dragging || dragging === card) return;
        c.insertBefore(dragging, card);
      };
    }

    c.appendChild(card);
  });
}

function syncOrder() {
  order = [...document.querySelectorAll('.paragraph-card')]
    .map(c => paragraphs.find(p => p.id === c.dataset.id));
}

function moveUp(i) {
  if (i === 0) return;
  [order[i-1], order[i]] = [order[i], order[i-1]];
  render();
}

function moveDown(i) {
  if (i === order.length-1) return;
  [order[i+1], order[i]] = [order[i], order[i+1]];
  render();
}

document.getElementById('checkBtn').onclick = () => {
  let ok = true;
  document.querySelectorAll('.paragraph-card').forEach((c,i)=>{
    const p = paragraphs.find(p=>p.id===c.dataset.id);
    if (p.correct===i) c.classList.add('correct');
    else { c.classList.remove('correct'); ok=false; }
  });
  const r = document.getElementById('result');
  r.classList.remove('hidden');
  r.textContent = ok ? 'üéâ Perfect!' : '‚ùå Some paragraphs are incorrect.';
  r.style.color = ok ? '#16a34a' : '#dc2626';
  checkBtn.classList.add('hidden');
  resetBtn.classList.remove('hidden');
};

document.getElementById('resetBtn').onclick = () => {
  shuffle();
  render();
  result.classList.add('hidden');
  resetBtn.classList.add('hidden');
  checkBtn.classList.remove('hidden');
};

shuffle();
render();
</script>

</body>
</html>
