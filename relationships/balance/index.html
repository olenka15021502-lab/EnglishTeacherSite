<!doctype html>
<html lang="en" class="h-full">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Path to Balance - Story Sequencing</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { box-sizing: border-box; font-family: 'Georgia', 'Times New Roman', serif; }

.paragraph-card {
  transition: all 0.3s ease;
  background: white;
  border: 2px solid #d8b4fe;
  border-radius: 0.5rem;
  padding: 1rem;
  display: flex;
  align-items: flex-start;
  gap: 8px;
  position: relative;
}

.paragraph-card.correct {
  background: linear-gradient(135deg, #d4f1d4 0%, #e8f8e8 100%);
  border-color: #4ade80;
  box-shadow: 0 0 20px rgba(74, 222, 128, 0.3);
}

.arrow-buttons {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.arrow-buttons button {
  background: #6b21a8;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 4px 6px;
  font-size: 16px;
  cursor: pointer;
}

.arrow-buttons button:hover {
  background: #7c3aed;
}
</style>
</head>
<body class="h-full">
<div class="w-full h-full overflow-auto" style="background: linear-gradient(135deg, #e9d5ff 0%, #f3e8ff 50%, #fae8ff 100%);">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 py-8 sm:py-12">
    <div class="text-center mb-6 sm:mb-8">
	<div class="inline-flex items-center gap-3 px-6 py-2 bg-white/60 backdrop-blur-sm rounded-full border border-purple-200 shadow-sm mx-auto mt-4 mb-6">
  <svg class="w-5 h-5 text-purple-500" viewBox="0 0 24 24" fill="currentColor">
    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
  </svg>
  <a id="brand-link" href="https://t.me/english_exams_with_olga" target="_blank" rel="noopener noreferrer"
     class="font-semibold text-purple-700 hover:text-purple-800 transition-colors text-center">
    English with Olga
  </a>
</div>

      <h1 id="activity-title" class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4" style="color: #6b21a8;">The Path to Balance</h1>
      <p id="instruction-text" class="text-base sm:text-lg px-2" style="color: #7c3aed;">Use the arrows to arrange the paragraphs in the correct order and reconstruct the story.</p>
      <button id="check-button" class="mt-6 px-8 py-3 text-lg font-semibold rounded-lg shadow-lg transition-all hover:shadow-xl hover:scale-105" style="background: #6b21a8; color: white;">Check My Answer</button>
      <button id="reset-button" class="mt-6 ml-4 px-8 py-3 text-lg font-semibold rounded-lg shadow-lg transition-all hover:shadow-xl hover:scale-105 hidden" style="background: #7c3aed; color: white;">Try Again</button>
      <div id="result-message" class="mt-4 text-xl font-bold hidden"></div>
    </div>
    <div id="paragraph-container" class="space-y-3 sm:space-y-4"></div>
  </div>
</div>

<script>
const paragraphs = [
  {id:'A', text:"Within the first year of their marriage, the dynamics of Anna and Robert's relationship began to change. Influenced by her difficult family background, Anna gradually started to take her husband for granted. She became emotionally distant, and despite Robert's consistent efforts, a sense of coldness crept into their relationship. Although Robert continued to pull his weight in the family and often tried to go the extra mile, Anna grew increasingly absorbed in her career. Early in their marriage, she had promised to think about starting a family, but as time passed, she quietly went back on her promise. This growing imbalance slowly drove a wedge between them.", correctPosition:0 },
  {id:'B', text:"Robert found himself on the end of his tether. Feeling that his efforts were no longer noticed or appreciated, he began to bottle up his feelings, hoping the situation would somehow resolve itself. Instead, the emotional distance only deepened. At the same time, Robert was in turmoil, feeling misunderstood and emotionally drained. Realising that the situation was no longer sustainable, he suggested they take time apart.", correctPosition:1 },
  {id:'C', text:"Anna reacted strongly. She seethed with resentment, convinced that Robert was being unfair and failing to see how much she had been working for their future ‚Äî for financial security, a home, and stability. From her perspective, his decision felt sudden and deeply hurtful.", correctPosition:2 },
  {id:'D', text:"After several weeks of separation, Anna began to reflect on her behaviour. She gradually recognised how emotionally distant she had become and how little she had communicated her fears and doubts. Determined to make things right, she reached out, ready to meet Robert halfway.\n\nWhen they finally spoke, they managed to clear the air. Anna admitted that her fear of starting a family was rooted in her childhood, shaped by the emotional tensions she had witnessed between her parents and the instability she associated with family life at that time. This conversation marked a turning point.", correctPosition:3 },
  {id:'E', text:"With renewed trust and emotional clarity, Anna and Robert reached a place of mutual understanding and a sense of calm. They felt more grounded, more secure, and at peace with each other. Now, they are expecting a baby ‚Äî not as a result of pressure or fear, but as a shared and conscious decision.", correctPosition:4 }
];

let currentOrder = [];

function shuffleArray(array){
  const shuffled=[...array];
  for(let i=shuffled.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]];
  }
  return shuffled;
}

function initializeParagraphs(){
  do { currentOrder = shuffleArray(paragraphs); } 
  while(currentOrder.some((p,i)=>p.correctPosition===i));
  renderParagraphs();
}

function renderParagraphs(){
  const container = document.getElementById('paragraph-container');
  container.innerHTML='';
  currentOrder.forEach((p,i)=>{
    const card=document.createElement('div');
    card.className='paragraph-card';
    card.dataset.id=p.id;

    card.innerHTML=`
      <p class="flex-1 text-sm sm:text-base leading-relaxed" style="color: #374151;">${p.text}</p>
      <div class="arrow-buttons">
        <button class="up-btn">‚Üë</button>
        <button class="down-btn">‚Üì</button>
      </div>
    `;

    card.querySelector('.up-btn').addEventListener('click',()=>{
      const index=currentOrder.findIndex(x=>x.id===p.id);
      if(index>0){ [currentOrder[index-1],currentOrder[index]]=[currentOrder[index],currentOrder[index-1]]; renderParagraphs(); }
    });

    card.querySelector('.down-btn').addEventListener('click',()=>{
      const index=currentOrder.findIndex(x=>x.id===p.id);
      if(index<currentOrder.length-1){ [currentOrder[index+1],currentOrder[index]]=[currentOrder[index],currentOrder[index+1]]; renderParagraphs(); }
    });

    container.appendChild(card);
  });
}

function checkAnswer(){
  let allCorrect=true;
  const cards=document.querySelectorAll('.paragraph-card');
  cards.forEach((card,index)=>{
    const p=paragraphs.find(x=>x.id===card.dataset.id);
    if(p.correctPosition===index) card.classList.add('correct');
    else { card.classList.remove('correct'); allCorrect=false; }
  });
  const result=document.getElementById('result-message');
  result.classList.remove('hidden');
  result.textContent=allCorrect?'üéâ Perfect! You got the story in the correct order!':'‚ùå Not quite right. The green paragraphs are in the correct position.';
  result.style.color=allCorrect?'#16a34a':'#dc2626';
  document.getElementById('check-button').classList.add('hidden');
  document.getElementById('reset-button').classList.remove('hidden');
}

function resetActivity(){
  document.getElementById('result-message').classList.add('hidden');
  document.getElementById('reset-button').classList.add('hidden');
  document.getElementById('check-button').classList.remove('hidden');
  initializeParagraphs();
}

initializeParagraphs();
document.getElementById('check-button').addEventListener('click',checkAnswer);
document.getElementById('reset-button').addEventListener('click',resetActivity);
</script>
</body>
</html>
